# Slopspotter Browser Extension

Slopspotter adds inline risk signals to code snippets generated by AI chat interfaces. It extracts package references, queries the Slopspotter backend for intelligence, and renders color-coded indicators with hover cards that summarize risk, heuristics, and metadata links.

## Getting started

```bash
# Install dependencies
npm install

# Produce a production build in dist/
npm run build

# During development, keep webpack watching
npm run watch
```

To load the extension in Chrome/Edge:

1. Run `npm run build`.
2. Open `chrome://extensions`, enable Developer Mode, and choose **Load unpacked**.
3. Select the  `dist/` directory. \EC521-Final-Project\slopspotter-extension\dist

For Firefox:

1. Run `npm run build`.
2. Visit `about:debugging#/runtime/this-firefox` and click **Load Temporary Add-on**.
3. Choose `dist/manifest.json`.

## Runtime behavior

- **Content script** (`src/content/contentScript.js`) watches chat-style UIs for `<pre><code>` blocks, parses them with language-specific regexes, and sends package lists to the background service.
- **Background service worker** (`src/background/index.js`) queries the backend REST API (`/check-packages`) and falls back to heuristics if the server is unreachable.
- **Inline indicators** map risk (`high`, `medium`, `low`, `unknown`) to red/yellow/green chips; hovering reveals metadata, confidence scores, and registry links.
- **Popup UI** (`dist/popup.html`) allows configuring the backend base URL and whether analysis runs automatically when new code appears.

If the backend is offline, the extension still renders heuristic estimates and displays a warning banner.

## Backend expectations

The background worker posts JSON payloads shaped like:

```jsonc
{
  "snippetId": "snippet-123",
  "packages": [
    {
      "name": "requests",
      "language": "python",
      "contextSnippet": "import requests"
    }
  ]
}
```

It expects a response containing per-package `riskLevel`, optional `score`, `summary`, and `metadataUrl`. See `src/background/index.js` for the full contract and heuristic fallback.
